{% extends "base.html" %}

{% block title %}Details: {{ title }}{% endblock %}

{% block content %}
{% if results %}
    <h1 class="main">Details for Macro Event: {{ results.melabel }}</h1> 
    <table summary="Details for a Macro Event {{ results.melabel }}" id="detail">
        <tr><th>Macro Event Title:</th><td>{% if results.melabel %}{{ results.melabel }}{% else %}n/a{% endif %}</td></tr>
        {% if results.mindate %}<tr><th>Min Date:</th><td>{{ results.mindate }}</td></tr>{% endif %}
        {% if results.maxdate %}<tr><th>Max Date:</th><td>{{ results.maxdate }}</td></tr>{% endif %}
        <tr><th>Cities:</th><td>{% if results.location %}{{ results.location|join:" ; " }}{% else %}n/a{% endif %}</td>
        <tr><th>Articles:</th><td><a href={{ results.articles_link }}>{{ results.articleTotal }}</a></td></tr>        <tr><th>Type of Event:</th><td>{% if results.event_type %}{{ results.event_type|join:" ; " }}{% else %}n/a{% endif %}</td>        
        <tr><th>Reason:</th><td>{% if results.reason %}{{ results.reason|join:" ; " }}{% else %}n/a{% endif %}</td>   
        <tr><th>Outcome:</th><td>{% if results.outcome %}{{ results.outcome|join:" ; " }}{% else %}n/a{% endif %}</td>
          {% for event in results.events %} 

          <tr>
            <th>
                Event:<br/>
                {% if event.triplet_first %}Semantic Triplets:<br/><br/>{% endif %}       
            </th>
            <td>
                {{ event.evlabel }}<br/>                       
                {% if event.location %}{{ event.location }}<br/>{% endif %}  
                {% if event.triplet_first %}
                &bull;&nbsp;{{ event.triplet_first }}
                <div class="layer1">
                <div class="more">. . .</div>
                <div class="triplet_rest">
                  {% for triple in event.triplet_rest %}  
                    &bull;&nbsp;{{ triple }}<br/>&nbsp;<br/>
                  {% endfor %} </div>
                </div>
                {% endif %}            
            </td></tr> 
            
            {% if event.uparto %}
            <tr>
            <th>Event<br/>{{ event.evlabel }}<br/>Participant-Objects:</th>
            <td >
                <table id="part">
                <tr><th>Name</th>
                <th>Role</th>
                <th>Gender</th>
                <th>Race</th>
                <th>Age</th></tr>
            {% for event in event.uparto %}
                <tr>        
                <td>{% if event.name %}{{ event.name }}{% else %}n/a{% endif %}</td>
                <td>{% if event.role %}{{ event.role }}{% else %}n/a{% endif %}</td>
                <td>{% if event.gender %}{{ event.gender }}{% else %}n/a{% endif %}</td>
                <td>{% if event.race %}{{ event.race }}{% else %}n/a{% endif %}</td>
                <td>{% if event.age %}{{ event.age }}{% else %}n/a{% endif %}</td>                                      
                </tr>
            {% endfor %}
            </table></td></tr>
            {% endif %}

            {% if event.uparts %}
            <tr>
            <th>Event:{{ event.evlabel }}<br/>Participant-Subjects:</th>
            <td>
                <table id="part">
                <tr><th>Name</th>
                <th>Role</th>
                <th>Gender</th>
                <th>Race</th>
                <th>Age</th></tr>
            {% for event in event.uparts %}
                <tr>        
                <td>{% if event.name %}{{ event.name }}{% else %}n/a{% endif %}</td>
                <td>{% if event.role %}{{ event.role }}{% else %}n/a{% endif %}</td>
                <td>{% if event.gender %}{{ event.gender }}{% else %}n/a{% endif %}</td>
                <td>{% if event.race %}{{ event.race }}{% else %}n/a{% endif %}</td>
                <td>{% if event.age %}{{ event.age }}{% else %}n/a{% endif %}</td>                                    
                </tr>
            {% endfor %}
            </table></td></tr>
            {% endif %}       
            
        {% endfor %}      
  </table>
{% else %}
<h1 class="main">Not Found</h1>
{% endif %}  
{% endblock %}
