{% extends "page_base.html" %}


{% block head-title %}Georgia Lynchings Timeline{% endblock %}

{% block head-scripts %}
    {{ block.super }}
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/timemap/lib/mxn/mxn.js?(googlev3)"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/timemap/lib/timeline-1.2.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/timemap/src/timemap.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/timemap/src/loaders/json.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/timemap/src/loaders/progressive.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/timemap_config.js"></script>
{% endblock %}

{% block endscript %}
  {{ block.super }}
  <script type="text/javascript">
    var START_LOCATION = "1899-04-23"; {# date of Sam Hose lynching #}

    $(document).ready(function() {
      TimeMap.init({
        mapId: "map",
        timelineId: "timeline",
        options: {
          eventIconPath: "{{ STATIC_URL }}js/timemap/images/",
        },
        datasets: [
          {
            type: "json",
            options: {
              url: "{% url events:map-victim-data %}",
              {# TimeMap infoTemplate language uses literal {{}}, so make them with templatetag #}
              infoTemplate:
                "<div><b>{% templatetag openvariable %}title{% templatetag closevariable %}</b></div> \
                 <div>Date: {% templatetag openvariable %}date{% templatetag closevariable %}</div> \
                 <div>Location: {% templatetag openvariable %}county{% templatetag closevariable %} County</div> \
                 <div>Alleged Crime: {% templatetag openvariable %}alleged_crime{% templatetag closevariable %}</div> \
                 <div><a target='_blank' href='{% templatetag openvariable %}detail_link{% templatetag closevariable %}'>more info</a></div>"
            }
          }
        ],
        bandIntervals: [
          Timeline.DateTime.MONTH,
          Timeline.DateTime.DECADE
        ],
        scrollTo: START_LOCATION
      });
    });
  </script>
{% endblock %}{# endscript #}

{% block head-style %}
   {{ block.super }}
    <link href="{{ STATIC_URL }}style/timemap.css" type="text/css" rel="stylesheet"/>
{% endblock %}

{% block content-title %}Lynchings in Georgia (1875-1930) Timeline Map{% endblock %}

{% block content-body %}
        {# divs for timemap display #}
        <div class="mapdisplay">
        <div id="timemap" />
            <div id="timelinecontainer" />
            <div id="timeline">Loading Timeline</div>
            <div id="mapcontainer" class="clearfix">
            <div id="map">Loading Map</div>
        </div>
        </div>
{% endblock %}
